{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\nconst POSTS_URL = `${API_BASE_URL}/posts`;\nconst AUTH_URL = `${API_BASE_URL}/api`;\nasync function request(url, options = {}) {\n  const res = await fetch(url, options);\n  const text = await res.text();\n  const data = text ? JSON.parse(text) : null;\n  if (!res.ok) {\n    const message = (data === null || data === void 0 ? void 0 : data.message) || `HTTP ${res.status}`;\n    throw new Error(message);\n  }\n  return data;\n}\nfunction buildHeaders(token, extra = {}) {\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...extra\n  };\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n  return headers;\n}\nexport function getPosts() {\n  return request(POSTS_URL);\n}\nexport function getPost(id) {\n  return request(`${POSTS_URL}/${id}`);\n}\nexport function createPost(post, token) {\n  return request(POSTS_URL, {\n    method: \"POST\",\n    headers: buildHeaders(token),\n    body: JSON.stringify(post)\n  });\n}\nexport function updatePost(id, patch, token) {\n  return request(`${POSTS_URL}/${id}`, {\n    method: \"PATCH\",\n    headers: buildHeaders(token),\n    body: JSON.stringify(patch)\n  });\n}\nexport function deletePost(id, token) {\n  return request(`${POSTS_URL}/${id}`, {\n    method: \"DELETE\",\n    headers: buildHeaders(token)\n  });\n}\nexport function registerUser(payload, token) {\n  return request(`${AUTH_URL}/register`, {\n    method: \"POST\",\n    headers: buildHeaders(token),\n    body: JSON.stringify(payload)\n  });\n}\nexport function loginUser(payload) {\n  return request(`${AUTH_URL}/login`, {\n    method: \"POST\",\n    headers: buildHeaders(),\n    body: JSON.stringify(payload)\n  });\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","POSTS_URL","AUTH_URL","request","url","options","res","fetch","text","data","JSON","parse","ok","message","status","Error","buildHeaders","token","extra","headers","Authorization","getPosts","getPost","id","createPost","post","method","body","stringify","updatePost","patch","deletePost","registerUser","payload","loginUser"],"sources":["D:/Study/4 curse Computer science/3 curse 1 semestr/Web client service/modul/my-app/frontend/src/api.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\nconst POSTS_URL = `${API_BASE_URL}/posts`;\r\nconst AUTH_URL = `${API_BASE_URL}/api`;\r\n\r\nasync function request(url, options = {}) {\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n  const data = text ? JSON.parse(text) : null;\r\n\r\n  if (!res.ok) {\r\n    const message = data?.message || `HTTP ${res.status}`;\r\n    throw new Error(message);\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction buildHeaders(token, extra = {}) {\r\n  const headers = { \"Content-Type\": \"application/json\", ...extra };\r\n  if (token) {\r\n    headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return headers;\r\n}\r\n\r\nexport function getPosts() {\r\n  return request(POSTS_URL);\r\n}\r\n\r\nexport function getPost(id) {\r\n  return request(`${POSTS_URL}/${id}`);\r\n}\r\n\r\nexport function createPost(post, token) {\r\n  return request(POSTS_URL, {\r\n    method: \"POST\",\r\n    headers: buildHeaders(token),\r\n    body: JSON.stringify(post),\r\n  });\r\n}\r\n\r\nexport function updatePost(id, patch, token) {\r\n  return request(`${POSTS_URL}/${id}`, {\r\n    method: \"PATCH\",\r\n    headers: buildHeaders(token),\r\n    body: JSON.stringify(patch),\r\n  });\r\n}\r\n\r\nexport function deletePost(id, token) {\r\n  return request(`${POSTS_URL}/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: buildHeaders(token),\r\n  });\r\n}\r\n\r\nexport function registerUser(payload, token) {\r\n  return request(`${AUTH_URL}/register`, {\r\n    method: \"POST\",\r\n    headers: buildHeaders(token),\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\nexport function loginUser(payload) {\r\n  return request(`${AUTH_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: buildHeaders(),\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}